<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>St. Anna English Trainer</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìù</text></svg>">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap" rel="stylesheet">
<style>
:root{--ink:#1a1a2e;--ink-light:#4a4a6a;--ink-muted:#8888a4;--accent:#2563eb;--accent-hover:#1d4ed8;--accent-soft:#dbeafe;--accent-glow:rgba(37,99,235,.08);--surface:#fff;--bg:#f0f0f5;--bg-warm:#fafafa;--border:#e2e2ec;--success:#059669;--warning:#dc2626;--radius:12px;--radius-sm:8px;--shadow-sm:0 1px 3px rgba(26,26,46,.06);--shadow-md:0 4px 16px rgba(26,26,46,.08);--shadow-lg:0 8px 32px rgba(26,26,46,.12);--font-display:'DM Serif Display',Georgia,serif;--font-body:'DM Sans',-apple-system,sans-serif;}
[data-theme="dark"]{--ink:#e4e4ed;--ink-light:#b0b0c8;--ink-muted:#7878a0;--accent:#60a5fa;--accent-hover:#93bbfd;--accent-soft:rgba(96,165,250,.15);--accent-glow:rgba(96,165,250,.08);--surface:#1e1e2e;--bg:#14141f;--bg-warm:#1a1a28;--border:#2e2e42;--success:#34d399;--warning:#f87171;--shadow-sm:0 1px 3px rgba(0,0,0,.2);--shadow-md:0 4px 16px rgba(0,0,0,.3);--shadow-lg:0 8px 32px rgba(0,0,0,.4);}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{font-family:var(--font-body);background:var(--bg);color:var(--ink);min-height:100vh;display:flex;flex-direction:column}
#login-screen{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1rem}
.login-box{background:var(--surface);padding:2.5rem;border-radius:var(--radius);box-shadow:var(--shadow-lg);max-width:400px;width:100%;text-align:center}
.login-box h2{font-family:var(--font-display);font-size:1.8rem;margin:.5rem 0}
.login-box p{color:var(--ink-muted);font-size:.9rem}
.school-badge{display:inline-block;background:var(--accent-soft);color:var(--accent);font-weight:700;font-size:.8rem;padding:.3rem .8rem;border-radius:20px;letter-spacing:.03em;text-transform:uppercase}
.login-input{width:100%;padding:.75rem 1rem;border:2px solid var(--border);border-radius:var(--radius-sm);font-family:var(--font-body);font-size:1rem;outline:none;background:var(--bg-warm);color:var(--ink);margin-top:.6rem;transition:border-color .2s}
.login-input:focus{border-color:var(--accent)}
.login-error{display:none;margin-top:.8rem;color:var(--warning);font-size:.85rem;font-weight:600}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem 1.5rem;background:var(--accent);color:#fff;border:none;border-radius:var(--radius-sm);font-family:var(--font-body);font-size:1rem;font-weight:600;cursor:pointer;transition:all .15s;text-decoration:none}
.btn:hover{background:var(--accent-hover)}
#module-screen{display:none;min-height:100vh;flex-direction:column}
.module-header{background:var(--surface);border-bottom:1px solid var(--border);padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center}
.module-header h1{font-family:var(--font-display);font-size:1.3rem;font-weight:400}
.module-header h1 span{color:var(--accent)}
.module-grid{max-width:800px;width:100%;margin:3rem auto;padding:0 1.5rem;display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}
.module-card{background:var(--surface);border:2px solid var(--border);border-radius:var(--radius);padding:2rem;text-align:center;cursor:pointer;transition:all .2s;text-decoration:none;color:var(--ink)}
.module-card:hover{border-color:var(--accent);box-shadow:var(--shadow-md);transform:translateY(-2px)}
.module-icon{font-size:3rem;margin-bottom:1rem}
.module-title{font-family:var(--font-display);font-size:1.3rem;margin-bottom:.5rem}
.module-desc{color:var(--ink-muted);font-size:.88rem;line-height:1.5}
.module-badge{display:inline-block;margin-top:.8rem;background:var(--accent-soft);color:var(--accent);font-size:.75rem;font-weight:700;padding:.2rem .6rem;border-radius:4px;text-transform:uppercase;letter-spacing:.03em}
.greeting-bar{text-align:center;margin-top:2rem;color:var(--ink-muted);font-size:.9rem}
.greeting-bar strong{color:var(--ink)}
.theme-toggle{background:var(--border);border:none;width:36px;height:36px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.1rem;transition:all .2s}
.theme-toggle:hover{background:var(--accent-soft)}
footer{text-align:center;padding:1.5rem;color:var(--ink-muted);font-size:.8rem;margin-top:auto}
footer a{color:var(--accent);text-decoration:none}
@media(max-width:600px){.module-grid{grid-template-columns:1fr}.login-box{padding:1.5rem}}
</style>
</head>
<body>
<div id="login-screen">
  <div class="login-box">
    <div class="school-badge">St. Anna Gymnasium</div>
    <h2>English Trainer</h2>
    <p>Abitur Englisch 2026</p>
    <input type="text" id="studentName" class="login-input" placeholder="Dein Name ‚Ä¶" autocomplete="off">
    <select id="studentCourse" class="login-input">
      <option value="" disabled selected>Kurs w√§hlen ‚Ä¶</option>
      <option value="2e1">2e1</option><option value="2e2">2e2</option><option value="2e3">2e3</option><option value="2e4">2e4</option>
    </select>
    <select id="studentLevel" class="login-input">
      <option value="" disabled selected>Niveau w√§hlen ‚Ä¶</option>
      <option value="gA">grundlegendes Anforderungsniveau (gA)</option>
      <option value="eA">erh√∂htes Anforderungsniveau (eA)</option>
    </select>
    <input type="password" id="accessPassword" class="login-input" placeholder="Passwort eingeben ‚Ä¶" autocomplete="off" onkeyup="if(event.key==='Enter')doLogin()">
    <br><br>
    <button class="btn" style="width:100%" onclick="doLogin()">Zugang starten</button>
    <div id="loginError" class="login-error"></div>
  </div>
</div>
<div id="module-screen">
  <div class="module-header">
    <h1>English <span>Trainer</span></h1>
    <div style="display:flex;align-items:center;gap:.8rem;">
      <span id="greeting" style="font-size:.85rem;color:var(--ink-muted)"></span>
      <button class="theme-toggle" onclick="toggleDark()" id="themeBtn">üåô</button>
    </div>
  </div>
  <div class="greeting-bar">Willkommen, <strong id="greetName"></strong>! Was m√∂chtest du √ºben?</div>
  <div class="module-grid">
    <a class="module-card" href="mediation.html">
      <div class="module-icon">üåç</div>
      <div class="module-title">Sprachmittlung</div>
      <div class="module-desc">Deutschen Quelltext lesen und auf Englisch vermitteln ‚Äì mit KI-Bewertung nach ISB-Raster.</div>
      <div class="module-badge">Pr√ºfungsteil C</div>
    </a>
    <a class="module-card" href="writing.html">
      <div class="module-icon">‚úçÔ∏è</div>
      <div class="module-title">Textproduktion</div>
      <div class="module-desc">Englischen Text analysieren, Stellungnahme oder gestaltendes Schreiben verfassen.</div>
      <div class="module-badge">Pr√ºfungsteil B</div>
    </a>
  </div>
  <footer>¬© 2026 St. Anna Gymnasium ¬∑ English Trainer ¬∑ Created by DZ<br><a href="dashboard.html" style="opacity:.5;font-size:.75rem;">Lehrer-Dashboard ‚Üí</a></footer>
</div>
<script>
async function doLogin(){
  const name=document.getElementById("studentName").value.trim(),course=document.getElementById("studentCourse").value,level=document.getElementById("studentLevel").value,pw=document.getElementById("accessPassword").value.trim(),err=document.getElementById("loginError");
  if(!name){err.textContent="Bitte gib deinen Namen ein.";err.style.display="block";return}
  if(!course){err.textContent="Bitte w√§hle deinen Kurs.";err.style.display="block";return}
  if(!level){err.textContent="Bitte w√§hle dein Niveau (gA/eA).";err.style.display="block";return}
  if(!pw){err.textContent="Bitte gib das Passwort ein.";err.style.display="block";return}
  // Validate password server-side
  try{
    const res=await fetch("https://sag-abi-mediation-api.sanktannagymnasium.workers.dev/api/verify",{method:"POST",headers:{"Content-Type":"application/json","X-Access-Password":pw},body:JSON.stringify({})});
    if(!res.ok){err.textContent="Falsches Passwort.";err.style.display="block";return}
  }catch(e){err.textContent="Verbindungsfehler. Bitte versuche es erneut.";err.style.display="block";return}
  sessionStorage.setItem("access","1");sessionStorage.setItem("student_name",name);sessionStorage.setItem("student_course",course);sessionStorage.setItem("student_level",level);sessionStorage.setItem("access_password",pw);
  showModules();
}
function showModules(){
  document.getElementById("login-screen").style.display="none";document.getElementById("module-screen").style.display="flex";
  const n=sessionStorage.getItem("student_name")||"",c=sessionStorage.getItem("student_course")||"",l=(sessionStorage.getItem("student_level")||"").toUpperCase();
  document.getElementById("greetName").textContent=`${n} ¬∑ ${c} ¬∑ ${l}`;document.getElementById("greeting").textContent=`${n} ¬∑ ${c} ¬∑ ${l}`;
}
function toggleDark(){const d=document.documentElement.getAttribute("data-theme")==="dark";document.documentElement.setAttribute("data-theme",d?"light":"dark");localStorage.setItem("theme",d?"light":"dark");document.getElementById("themeBtn").textContent=d?"üåô":"‚òÄÔ∏è"}
function initTheme(){const s=localStorage.getItem("theme"),p=window.matchMedia("(prefers-color-scheme:dark)").matches,t=s||(p?"dark":"light");document.documentElement.setAttribute("data-theme",t);const b=document.getElementById("themeBtn");if(b)b.textContent=t==="dark"?"‚òÄÔ∏è":"üåô"}
window.onload=function(){initTheme();if(sessionStorage.getItem("access")==="1"&&sessionStorage.getItem("student_name"))showModules()};
</script>
</body>
</html>
